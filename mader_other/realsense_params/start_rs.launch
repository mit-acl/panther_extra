<launch>

 <arg name="record" default="true" />

    <include file="$(find realsense2_camera)/launch/rs_camera.launch">
    </include>



<node pkg="tf2_ros" type="static_transform_publisher" name="link1_broadcaster" args="0.2 0.0 0.0 0.0 0.0 3.14 SQ04 SQ04/camera" />


<node pkg="tf2_ros" type="static_transform_publisher" name="link2_broadcaster" args="0.0 0.0 0.0 0.0 0 0.0 SQ04/camera SQ04/camera_link" />


 <node pkg="rosbag" type="record" name="rosbag_record_camera"
       args="record -o /media/nvidia/jesus_usb/bags/camera 

/SQ04/camera/color/image_raw/compressed
/SQ04/camera/depth/camera_info 
/SQ04/camera/depth/image_rect_raw/compressed 
/SQ04/camera/depth/points 
/tf 
/tf_static"
       if="$(arg record)" />


 <!-- For the part below, see http://wiki.ros.org/depth_image_proc#line-213-5:~:text=For%20example%2C%20the%20launch%20file%20to%20execute%20a%20'point_cloud_xyz'%20nodelet%20is%20like%20as -->

  <node pkg="nodelet" type="nodelet" name="nodelet_manager" args="manager" />

  <node pkg="nodelet" type="nodelet" name="nodelet1"
        args="load depth_image_proc/point_cloud_xyz nodelet_manager">
    <remap from="camera_info" to="SQ04/camera/depth/camera_info"/>
    <remap from="image_rect" to="SQ04/camera/depth/image_rect_raw"/>
    <remap from="points" to="SQ04/camera/depth/points"/>
  </node>
</launch>
